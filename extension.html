<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau Prompt Extension</title>
    <script src="https://unpkg.com/@tableau/extensions-api"></script> 
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h2>Enter Your Prompt v5</h2>
    <input type="text" id="prompt" placeholder="Enter your prompt here">
    <button id="submitPrompt">Submit</button>

    <div id="vizContainer" style="width:800px; height:600px;"></div>

    <script>
        $(document).ready(function() {
            tableau.extensions.initializeAsync().then(function() {
                $('#submitPrompt').click(function() {
                    // Trigger the visualization creation when the button is pressed
                    createVisualization("https://public.tableau.com/app/profile/sherzodbek.ibragimov/viz/2024WorldEconomicForumTravelTourismDevelopmentIndex/Dashboard");
                });
            });
        });

        function createVisualization(tableauUrl) {
            // Remove previous viz if it exists
            if (window.viz) {
                window.viz.dispose();
            }

            var containerDiv = document.getElementById('vizContainer');

            // Set options for embedding Tableau visualization
            var options = {
                hideTabs: true,
                onFirstInteractive: function () {
                    console.log("Tableau visualization is ready.");
                }
            };

            // Create new viz with the provided Tableau URL
            window.viz = new tableau.Viz(containerDiv,"https://public.tableau.com/app/profile/sherzodbek.ibragimov/viz/2024WorldEconomicForumTravelTourismDevelopmentIndex/Dashboard", options);
        }
    </script>
</body>
</html>



<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tableau Prompt Extension</title>
    <script src="https://unpkg.com/@tableau/extensions-api"></script> 
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h2>Enter Your Prompt</h2>
    <input type="text" id="prompt" placeholder="Enter your prompt here">
    <button id="submitPrompt">Submit</button>

    <div id="vizContainer" style="width:800px; height:600px;"></div>

    <script>
        $(document).ready(function() {
            tableau.extensions.initializeAsync().then(function() {
                $('#submitPrompt').click(function() {
                    $.ajax({
                        url: 'http://localhost:5000/fetch_data', // Update with your backend URL
                        type: 'POST',
                        contentType: 'application/json',
                        success: function(response) {
                            if (response.error) {
                                console.error("Error: ", response.error);
                            } else {
                                createVisualization(response.tableauUrl);
                            }
                        },
                        error: function(error) {
                            console.error("Error fetching data: ", error);
                        }
                    });
                });
            });
        });

        function createVisualization(tableauUrl) {
            // Remove previous viz if it exists
            if (window.viz) {
                window.viz.dispose();
            }

            var containerDiv = document.getElementById('vizContainer');

            // Set options for embedding Tableau visualization
            var options = {
                hideTabs: true,
                onFirstInteractive: function () {
                    console.log("Tableau visualization is ready.");
                }
            };

            // Create new viz with the provided Tableau URL

            window.viz = new tableau.Viz(containerDiv,"https://public.tableau.com/views/GPT-Demo-test/sales_data?:language=en-US&publish=yes&:sid=&:display_count=n&:origin=viz_share_link", options);
        }
    </script>
</body>
</html> -->
